<!doctype html>
<meta charset="UTF-8">
<title>On | Cloudflow (161024)</title>
<link rel="stylesheet" href="styles/site.css">
<link rel="shortcut icon" href="images/favicon.ico">

<div class="main">
    <nav>
        <div></div>

        <ul>
            <li><a href="#">Men</a>
            <li><a href="#">Women</a>
            <li><a href="#">Technology</a>
            <li><a href="#">News</a>
            <li><a href="#">Athletes</a>
        </ul>

        <div class="language-selector">
            <select>
                <option value="en">English
                <option value="de">Deutsche
            </select>
        </div>

        <div class="header-logo"></div>
    </nav>

    <section class="cloudflow-container">

        <!-- the cloudflow iframe with language attribute -->
        <iframe class="cloudflow" lang="en" src="iframe.html"></iframe>

    </section>

    </section>

    <footer>
        <div class="footer-logo"></div>
    </footer>
</div>


<script>
    // this function sets the language dynamically by posting a message to the iframe.
    // you shouldn't need this in practice, if the iframe is served from the same origin.
    function cloudflowSetLanguage(language) {
        var cf = document.querySelector('iframe.cloudflow');
        language = language || (cf.attributes.lang ? cf.attributes.lang.value : 'en');
        var msg = { set_language: language };
        cf.contentWindow.postMessage(JSON.stringify(msg), '*');
    }

    window.onload = function() {
        // set language from "lang" attribute
        cloudflowSetLanguage();

        // set language from select
        document.querySelector('select').onchange = function() {
            cloudflowSetLanguage(this.value);
            this.blur();
        };
    };
</script>
